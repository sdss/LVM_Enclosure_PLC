// Options: Export entire program; Code Block delimiter instructions;
// Formatted Rung Comments; Element Documentation Database; System Configuration;
// Memory Configuration/Devices with Built-In Types and User Add-Ons;
// use Element names (no NickNames); rung/address annotations;
// <TAB> parameter delimiter; 
// Write/overwrite file C:\LVM_Enclosure_PLC\PLC code\LVM enclosure_EXPORT_DMD.txt

PLC H2-DM1E

// Do not modify SYS_CONFIG block!
#BEGIN SYS_CONFIG
f43dfa1c179201a8d8e118efa590124507e9879077fe1f3f2d51f873b23c69a9cbbcb319d99b031e
2b0bf9de511779547a8abd5dc4e8e3b10af2c0aeddded21662a7f32f67c14b74a654304cefedd3c0
6f6fdea0560be253613d8fb29911803d658c7e6db9edb29ad6d70237986589a81f3c8c6f1a627bd3
275451b11f463895838a8081667d0c11445dff6067d794cdbc4ed5e8a48156c9f0e10b123a2cc6af
246ee80a8443b945fc3b1176ecfa03242707354cf69cc978f32c7aad832caa269cca09e29e11339a
d3534f8b31802ec654bd9e841fb1da65c1a43277708b2b790858c6e9303d96b551b940fdd4c27ecf
dad0af7cc1b1d564603d3599c0dce9b153eaa150a76bd8a7a2db81b912f75207c541033cdf23d66b
1a35e84518acaaff5213203ed85b1e724a704acf7bd34481f2e6b9c95116801dc31327b793c40120
7da3762f57dc033dbdec27443e33e7352793bcd9bfbdcfaa8d7ed5bd53e390ef4f3a7219ca7d129d
5d2be03767bd039efbdf46885bc36c046ab7bfe21cd5166158138fcf169ca471a17de8ae76496133
37cc04da5afd6559afbf539ac2548b198cb0382e8c0316b17ad9b1ac4840aa3731eeb03251e494d1
c231330d6be588fccc42481d60770d302bd6647dc78f003c2a48e7cb59412b0e0e121a8663efd3cd
ae3adf8187e1c645bbcc679b525d4688fb8fc85db8359d41cc11c01af4a9ee93653ed7dd8a181c98
ae9bcc4a4b4f0351209b2428bf03b799f9252be8068c3baea25104adacb4d4a8b6f595dc57724595
2dfb37f74a38114a2e555ddcf6de88d3b5a5a0cfdd67e4d28b14679a45717535f7dcfebd36be0652
ed51446b7e15e92a5c87cb8d92260dc327cb612099a663b9796ee7f1cde33f5d67457df298ec03f3
690a4f17adb340f56746fa12f018b0d71f0c7ca332b96347bc8eac090eed1200cd2f6a7dd2461011
e8861505a3d71b92613feaa3c188c91c32e743edafac025becc8e6cdb133173f728b85a69d1fab88
2c2f3904118e4e7781861102ec8a7bb3b6d010925df2642f7dcdda74d68005e7eb8b1e07781db23c
5669b472561a90e636fbbf621ba6f23baa803e84b4839880f4545023a571c85ba8e1015b8aeba7be
3172d81ec8f2be0bbc7076b00e7f69ff2c76b4015f76e319677e1b55edee58c839653ced96266835
3d8e375bfcaac02b7dbc1be165bd108c25c3c6a088a6a36d0fa77487b8e9df1158e2e75e4269a465
dab5d07710fd41ef6f795dace8f2d354e560c418f613940817f3bf578df2384804b1e037c0e7b975
dec82d7d1c944f3c7c1a0e0b0a686e3589b907063a54671f115e38300d4d42260bce4cd9aa456951
1cc41569a9d923ab8c0fee77be82513ecf2b7ad2b92d6b4f031cb44ff76b40a8b334626e972ee948
6e4b0a79b6e028cfcbfa8cc93a16f840cd71169a42a05624f1f4700f08e94aab1894e88897d6f6ee
4d10691c1a33f4cdf77e8baf31a92bbb611f2c6c518ff128703def0903be48079805bbbc7eeb4d3c
62ade183b37463b0ef83e676f157ebc6155967aa68a07a084850d6fa7f86bb271c71ec3cfa994d84
ebec7356d0edbd2ca0fd7a1465eeae0a536b18505bb4653b1b0ad1a93883fb35c39b0a6bc56bdf61
f97a44ad126d9a6dc7e2f438aff1359e9abbafec634c912eeea16879409377de710a4cd30f416e4a
370239c30d8ac6b756df648eba372c13e772618321ed5725281b539a8658f4b1a0fa4c7c3e624810
ce42ad48fce92c29b377e5f9da750d82e5ed939040c19dcff860783861c656825fa9759746caf74d
2174e31b32205caf55ff87395eecd8c9c9ff57d7a7e55d60a8d72d53d559ff78cc361b467d6303da
26c5e8a636d7b85c4eed2f6101925ef37f2fb535ff3b108bdfafc1e69a1e888417a53dad64c94595
49dbff179efe19a0e8d81c61982d2ab01abda47a81aa5dd595f0047b04e2a159a5bd6de758b297e5
f2af4deede0a8dc8ea96e99fe035798be70d262ad0f70ffe2dd92bea7fac8df7088bd88b883c9d7d
8f03e0c8611facb77bc6ddf04006250cb576a913e53301a93939c44923746f592ccd5168e6baf73e
be910ef1b1ed772840a4e0c10ec79da5af39aa863175ac66ae767dd2218534dab125462cc8691492
af3825f92be5a5fbe9ca7817c34b7fd197a6a9f1d8664addf9ce6c58694f75948a71a52d9e864012
f4ecda02e293e4caea47877365246f06690f9bb64a1b6d9e5fa393d66cddfe3a8806ee3fe9be40f5
a56ed179e0e255457b55e8662ae9350b213583e5abda5472baed643fceddcb46bc73cbaee64b1d5a
6853c439fe0ea921afc63e3b6e526405e1d5bc4531e3daac71fb93253304f90c8b92e0fc8c4da2cb
4de7caf3c788908bf759d29cc538b1b8d7db637e1cbd3430e0c472b155e12f2c67145be90b80af91
dc415dfd32601ec18f32649fa1f4fdcec5a9a30b909d9566a5f4d96f925015bdecd4a4c7b650d9e6
0580d87814c10b5af924e96ea12d45877dd44ebf63583dd12e405e13ff6c97af467d54f1131e806f
52de400123453824b0fb7a136dc5c8a6e6ae366518c4e8a498861432e1c9105548eb6434eaf3c99c
93a7af59717c010b5eeb9e10dcddb12c8ab0aeed30bb34a8868269f254f287bc544f15bb52877da7
e2777020651c30b572b33ae74b34c548328941b19cce093935814208fec1b17366ce78c5644afed4
fdb71969fcdfbd47c9029722c8cb5ede1f90d7f674359c6ad85f44ef734c67379614d681b11938af
b5294820b91b5ab0e24d88a01c311cf13ec2531432085a0c6237b83a2097f45eba2e66aea7d520e5
051947bd74e8f9c33a273cd4394b6ec3caa595e0dd028cca79f93f13a2f3df1c198da22686ed18a6
0632e230d74b0fe671c6386b42d91df215e67baf2a2941f89c5a6b75229bb7059bbb995f5fbf82a9
6bb7f545cee7945cefd8a2beabefee1ae0f507e4c7f8b2e85233e84a42c330df4ad14c2ee7fd7db9
be400c317cbe035678c754bbaa22065eb1d0aac36b15e567102acda22d659fc43f33ac87c57a60d8
e6bed3fe68f6378ab88d1eca000f39afa83e5a16a1aa5d2c0094db2f20382221bc81ca40cf857125
6cd5da81d3274895c3f61fe238919e102905cc59096dbb3541c8eb8915916db057db8fd212cd9afb
1a0b5355ffeb7582826c8f5fdb2a1aa166af241d8ed363d967d3de0655eebd0efeb65ac24c329c31
37a4e302b2c917e91663a850a9d5fa9f959e7aae61e7f08763d1276f7a39fda76ef37e09aa501fba
6df04ecc72b7d9c66cdfdf6ecdbbc4297a6d0c0b4862c8587c9e4343de833389d31b8a5ddaa4813e
1e36a7025137b9920d66da9b7e6959cbec9e4b6bf2b75ede41e22006d53594775b79e424506648ff
cb2370ca688ce443b41857834b4c0694e6d4a140dcfdb184c50c8ca3608d6fb877f16620bde0c8b5
9cbd23145e004aada43d91ace86f45a7a2cb4f07efd33deaf64c27f8ae3cb4c59bc088bc1b3762e0
8ca528d80cdf635e806a57964937625ec0f512037a45709ef3f7935389a9f6cbb5f968ba42b1ff4b
d694a26a2bcc38328b447c703556ec9d1ec82c8dd1c0112b45d6fde54dd1d949e9117b25e9e59f8c
a45d310b7bdc2028dbd8e937857a8c133d694cb84bad8cc8ed821d51c455487597f514d6fd76ad57
ec55f703e4e9abb354453c3b0e8c478d9a314b3eb62c7a8ddeb14999d13fe99e5485726c74c8e1de
ddc12e7a5fc68d352ffd7b3ce6ca63e18da495258251edd0fe11e16cce3addfcbec7d5ed5e39dc80
3b98d4afb69bff207664f3ea153d1c73eca2577b58201b692648cab2b54112064f9fb21ce24897b9
edc814e76b79fa2605b3d8be5c6304ade6f6febfe4191b00ba6c892e926342d9d9e02eab4e61891e
67744ee1cbb46cd31af5ecb8498dc21a58a0afa85367f96927c560772ae02be1f60d7772fa603621
72bd4595dd63350478ebc018ab0316d592d393cdf4408eb0ec65aed6bad80f64124598b5f68403c6
e925a397d8612e58e62b78376229e0a4c8b8f794166ea94ea97f28f5d8cd5ffa6e6e5779fa85ff4b
06a9df69ba75d8b637991f8dbbd55e002e333e445703bb74299c4b2dd7597ad918a9aabbdddaf0d9
9a264f29992eb831fd3e242aa1b7c78df7a8f2e18fa9a74547f190ada72e43bb817ae837debf896b
b8acd784c5ae02aaf4c361f9a0c898dde04197a495ecfadcb01255b604ac3fad1dfb8b6bcc676cef
93e51766b852b67e683b44305a2dd62905746ca5230cdb63a4bb3ef7f8ea0fb1d9fda52f23adbad8
ba0ac41fafacdcafc37b95254a1793b748c05d73cca0c2fd1ed7704d6c02e5299a864f0f6317d853
886a7bb9d2e85d6cbac836f48dca826087174538c0064175f9a982c1a192ccfc6ecb34e0a8e87fb4
4a0a7e1b157310f45935349b1da634b44c1997c3548bf1a49688590d287c9396f8c7d774a88f9907
75cf7ec252752d05201d7db898301584cb13b05d21bce79afeb24c416e8006da3998def45e82c730
9c71bbb7e058651e03d78d3319eeb7be7829870b1fbd937aca23ab557a3abf9a1f684d2a68e734a8
016127cf531fd2cdae00cb15e21efe4fbe04564de837f93bc46a9707a2cc1a8514b9439532957d65
bd8ef1a3006bf05eb82cc98e93a97953dccdfe0bfd1dfc57f000494192e80edac4580f3dc9dc5eae
837f7d055efdaae16d93d6aadb7a2e77cc4163cd8af3fcaf8792cecb85c0199ad9edaeea083562c9
897dcddf698200c0d3f1ea144b22e627b9e0daa74a92f5ed5f4dfb10f81060f98f47ee05aef882a5
153d7617f91b88d0bcf23ff9ceecf97749810205b4320b05dd05290f3a2a305880eb8c3a6f679ba9
f8375dd6a91497aaeb667ccb303344a32bdbe354f26519974b099e5fde52f693a243d3d0c7092746
947200512713508dd7d7b4b0f6fcd72abbb84fa820d0e85ff9ee03bc96efcfdb0db860750417683c
e0b11c401bb7969de3900964508f6d8c2946d54cb328443f5240c03013801b8ef8f97c41a153f688
326e3cc2179ecc86bead2621f14e5f42786fef5c5bd2f59a038c9408a00a644c02c2c8fa8ec0817d
9d88622262de94f3b3a2d18102f2682afa1325320cf242ca1c92b7fdefc6db216a5eb1b015c890f3
37249be4bdacff0a4cf3876e23e375dc87b654e48a722c0f7bbaa6185c039fd57e8e4058c8dbc098
719873540710d3345312ec4e3f951eee992943e3129cee1a01a7f265c96318c1aea04cb746335eb6
d20e38852a827196345424cdb8d41369c9d144dd2a6bf439dffc96d83dd89cdb21a3f60847a4de8d
2caaeaba00f99c9cf4d9f3ba072180b86dc43e0f9b8bd4f69213f6c2bdd8cde9698e7ffbd4208de3
1a2f578dfe9c891d2d2b8b5d439caf37b9a4a604918ee5ea100b1eba7b6c11b80d9bcade40de1f0d
923b185f0ac008b90240385320af5357fe2a184ed0b8f4e8a0e9feeabfd04b457844955bed8fd4b8
69c2fa24ab496793443e367bf04f45e9369054bdcb9b821e840790a60a559f83c6f1e72863d08984
63e1f92e0053d739224048dc3ac48ff1a8aa016cf6567239a5d3c06c9132e6614e6a35c5f12ba6fa
d09386a4592ae1ed19f2b9207a27bc594326decd9af1606c67046a4718f43187bc3e3093ef531780
62d72a2b23eac98be841c5efe1cd4b8ad053af9c08406d73f1295bfda48c28a2485bb626ab03360e
628d826096307bf4cbdc6077a38eac28c639724d6d363368040319247f1278cccef9da38498cef3c
f8f9eed817f860bcfab9c1a75fa567e83e4e85846cdf9ebccc35de613d6c0ec6e004ef292b89ea2c
eb90065ee3e265ab8eb57c686bc78c8356b2f82b47636cf295c17db5db7e1db375638911bee8c3e4
f4a9f01adcdde8f30ac10821228491d4d0dc43036172575230a05e77a7cc646146d81c4fa1e41410
83c92eef5518d8974a5e8343e04a7f64a17fe045ea2402471cb04a45b0c63727fdd30db67d639d91
184fb32bbd50bfbbd4e0fdbdb940ff2fe4e2936d27e17d326fffb3694c370da6895a058b49d4fb38
a8519a46a00fa948fc015bd79c8a18f4cfadccfa0596f4c2f8a4956dd959b21aae4ddbf65c845b02
fb2f6a6d7b71955f8c3aa24c6471580e5fabad9e2e0e67476408de515211fbbe5ee2173da4e278d7
a2856b1b02ed822e6284f966b5863d95763135108e1aaff8bfe077f3bf9b27b5932559aca8aa46c5
dcbd8d3e0655ebcd380b54d6a78e089d5ea170d68643f66f832ae5399c7be6c380263c80b1a7ad2b
e6f0c98071164b3caeeb96465a374c99ab212431af6f245798ec31e98c93996727ed1ab6bc264de4
bb935cb32a81c4ed9405dcca413972141f06785a47cdae5ee5bd5fe3deda4e5711ed8531cc59d939
439d738f1660d36a0473a669ecb7322d27d995cb24251e8c16c63dd68511c68e2eadd7ea18099663
8106804c77128efa74a34575965e6386674be3321c85265c4ff197fd620018e6aa46a5edb477e229
3418b68bc0bee92ff40f59d013c73d909d9dcd516ec41e6774f6f3ae87ff038eb9a387eb4dac3d2d
7d10879b366abdf2995c6057a294a9545bf013f32b0ff1cb281f37dfc76f5f31221e75766056c531
7d228f29f7feabf4177e6e709fc99058ab5a7bca834cce312bb4b26541f7e072862a4814164c15e0
0960b0db851442cb62726b8bd7c18562d7ce7f860b0356db823880e3d56138ee95afebf9d59703c6
d108c5e60e227718626c6c333d8beda0d4a7a922482e39303a86e36fa0542877de98858c59e882dc
6a5d311a92519a1dce8c9bbfb22e5f51b13c67cd41b12850d4b9ce1b884be2ef7ded515ff38d4d90
02db4f0283f97a818d7488ba922d5b593092fef1d6a7fc34e50e0b7529e38f6e8f1f3686901b8344
1186788d9bba038433f86dfc07d6904e408530e0c480f44a3c5bc65ec2a601b6cdbc81454ffc9854
64ba6327f4588abf608a2ea47c00cfa1786ec24f4e8fe85af8d9cc4263891ee5065d3784a073b15a
01e2473d2f535d085319e37666de29b41fd42c2f0e98dcddc6f6a8b5cbc2a1db3c94a2d76ed6e787
9afcd0538a7bcfaed60c3179b7407a8e975cfb4bd840daf6854ac2408bcaa129d32f02eb698ed7e0
2c7f5d69863f619e84e26ae60248f506c0fbae786adba4a16dfa72d6645c152047ba74632a61212d
8acba3e9f3ed47427dad3ce793acb41f5c9bdc5f210e0ced8afccb1b1f553337e986c8411e0cfd7e
066da8a16c5614bb3aa53879b49e39074beef98f27435414c79c3093507525317a0ed1f718a60462
9d006191b83b60533036cf27709719d7cf18b4eabb00a6f3cc4836c94c283fee0e29f57de99fcf03
3eedd843082b934348fccf576dd2a372eab7a1b865e2a4a63fcfcd49b1d9273b280f57fb15475c7d
38ea2360a407bb85ac2812d6da6a88b8145f2c10bb7acc7030b45e9cdb687046b7d3d8390b910f4e
8c1b683f27be7c1ad8378b19bad1a0d84a85f8b1c2be56617c6dd8b3397a6a6dba0f0c70e9dc1c71
4743d41cc7e0c781509c9e382c32561a0ecd47686db7756ff7e24fe2736ed9e481599f159d4e5320
f397de5f100b94ddb065a7d3865d6804782ed2737421bdca29374807912140b013eb32847c226e71
6c60641b9e3ac41b6c31ac39f5fd4137805e85e33fbba08b24dfa134e8006271ba261df609515180
ce22b559e4bd766fe75cf5bff9147a87cef3c0cfbadf27dacc6337ba5da0ef9412ade7098bd7f4c7
6168a0ea640958d0d493d25389285f75b85bbbf2a9e475e70a73b45920efcad48ac079bfc534846a
224a85958b1ca63106398353ec69ba01e33f7fbeb0bdf9e9097d2e8a2d49bdf7fc25197856eb6e30
487ad0586dcd8dca0041bcbffeddca177ee99f91764231fa8d87dc692821a4c33db35aad9efeef70
1c11147d65d047444906208772ce42dda79316908f12970c6f5736e23c68b19cd2a8ff76d5eec4a1
decff360d119e8f8c8014b428a4250aaa68ceb9fd0b89cae1a35b4df2badce4fb7b699572c4567cf
fb7969afd048c36fcd2d9da63bca333e14ada1a523c2a7a96abe45269b860f920261b09ab3c5696d
342360459b8b7852a8a0a3c5ffce73072c29392410dfb67b862eaa421cb6f5b6999c91c7b3df75d0
d2c91d8d30f3b5dcba325731a0187fa2c4250aff43ba1c6e799095bb00e2bfa9d3076757c3771abd
0ee4db05d2ea31cb151ecd2872952fe8774bd62013fabdbd5b315a6ca002c84e78a807eef62a17bd
99b62f559023a6d23c608f486103e1466130cbe67de5e75c3ee8433dc34f1ab44ad1d23dd31f9eec
86e7bc55d570118c918067e9310c4fbae54b9b09189b688d9c5d9b92e964dc7dcdcb8340e2c4a1d8
3a618fbd79585f51731ae03145b4c9494d924633152d8638319a7c8f5d9964199aeae7f8db30ccd3
fd7eac92390367f56369b8d0099b7ed9c1273781514a7455652d105c470825039a9d8c82e9d3a00e
be100512d37875ccec71bd8377d6dc866f19a4c60434fc45dacb4f30061d5466de7ed36e6ddc826d
5e0a32cb6f2a48bea65940fa3e7dd91fd6b52f3d6aca4c3647cf000c20af99d8a316d249e36c5254
ff0ad06373a12227cfd11915d929ef2c8f0a9f7a03d7dca826939ca84998c7b7e820728b92a49a3d
89237725a3f80aab76cd7e2ab8dcf8d5bca140947c7383760295e9b79a888711e840a9a50ff26bf4
8c6dcdd2a18b73c1d21a1bebb04154a94fc68dcab1f56643e586304e3f9d287f6d74f705e527ab0d
a986fc55f70eff557531d80a4763c9393339619e2910e7a178538f0117822a38cc2e71d9314b9a50
e2b2ac5a27a4b2fec9a2767e75cbbaca7c1c98f40116825139a2706683c4bb51bae96f06aea9f470
ce37f8c2e0583817f9f4402a5fc28101147a7f502c74ed070ff1a59d5da78e41c033f00b9aecfc33
d8c7ca162d3a80bdc3b0564b2f247436d4a491ca5da184d9a974fa971fbbce452e1debe69a600106
07c6d3b4cdaa6564890762e3a8eacaa9bc0c39797e6a564b6f6f908e6a75a8f4f95758d8cabfa9e8
cea82f54bd1ab4c52a4e8b7746545d8998551526637f6dd2560bf1c24675f1e7eae2a85d4bd3a487
cf9c2364773a5d7a587e03f62fab1bbc63171d8cdfacde7e967f9a563989f3c7da6835727ca33f00
66f72856a939cb678ac283ecdf38e4bfa88e89d2331390e219ca39f7e170efcf28b59552e9b16703
9e4b1561fc2bffbff67ca7aa8217b6077c38c0f1125f9f43711d04a40c7269dcca71ab92816043ab
1b2d0af9e27729b7a7f9cc55f20e7891d452b9f4897fd6a1b5c54d862ab68f6568317af185106cf6
59c81706fba81e4f6971b8cab55ceee01368ea2e6cffdc83943fe4c30fc924b0c6032ee67e0d14c1
b0bd110f593d5a8d2bebadcace1a96e32cf7e3480281b52cc9ff69083ffa1323ecfeb1a8e1e3f6df
3289a461a260043a95b8b7eb531fe2f5d9ec736cb1c6f34d3303cfe30876ebd3b8b18de6affb7af1
c6dafcf576ee666d03f7797b25cd93d305cbccbafe243448f9368b8dca773b91d5ba4ca868491609
776dfc768b53ab0a3ec898399c074f5800bdd0c4d6f54909a367587088e3e08ef7c5b50fdce78dd0
2a7aaf41c98c0d8b87679d0b180e6243f56970417c64e40ec74a62e8b7737fc2c567960b7586175d
60e4adb1a6b61db510b55334d13a92c56108017dd71c9393a1c73be6b08e62ec2799bb8f7685dc9c
c137c209dfbe796c449daa33da6884d6b3dce7f53a8a480bccf0fb7a8d29cbf8ae9971cc518e6617
129511e087bacec348811bbb329a2a72b9e5d864cb0360ef4ec73d1eb9bfdedb82dbb85dedf00759
17f6c99f07660ca2260eeaca6dba1b3a2a7f842c3a0e53b3fc0d01c895bcd5546fc2f8dd696775ce
29fef387fd3e3b10b16cc33ed4186373e5a901b2dc8a5e38fbbc677510d12aabab1b610a6c235e17
b37090397d7895d9ba30a519d8127b37a5b8962cca67031e2cdb3d42185f8fd277616ed7a5d3bc58
213f0d5aaf50da55eeb44bbdbf04e14a1622df2b5401d51153c5ba47101a5e18760be6aa298cbd8f
b1c55a2403de07c7bb73d31bf63718921cd8fa0e87954531a1dfb097de084f996ed2baea20f963d1
13f02db4d5e14925626df4dbc5b615b2c530fdfa94c3cb4f64e9f025e1c9599bb93d52da3eeb2f61
84026d4f466f0d32147170c55b098fe3543285a92be1cf27b215fe8a77c7fa8f327cfc70c08bee47
c3b565f3e94f32113eeb2a72aa055cfa9f53012bf75ee0e149d5a06d7bc1437cd6b39064a17caa23
e3f409209f96d87e6cca971f42b80f9f6c7ee1f1b82e360a11bfc9a99f1997883fbf858d20e921e4
5ddb61c68c3797cf689a97acfc2996f9f213156f7b2ecb57568843ddc5ad8688fc043128a16bb570
60eb9a114d34258f83c105eb172b617dfb2f69982590e94ac0287e483230870fe845128d58804c5a
ec12c7fa8ad165c52d51a8bf3c3cd4559e4b7872255a5398b6783d423f2741670bbdd7ae259c2c3c
88f5a7e2acacc2a79b3047675cec8e609fd27e91432a13a09d409f1a3f09ca7622fbe38eb4d54fa3
51e8a9ada50c836be09cae0b26422088983933d5ffb8ce40ee75a6fb1b1a5753557b2bc65ebe85c7
ac985fc992beac7ae83a17f599bff0bbd37803e7c8a687aff2c217cc0e6ca4f5c5e5a6aba2dfea38
4997d556743dbb090cb6aa7a9d3f461c6d37f08219ecb755ffe29a201e3773cfbfe839d47d9793a0
a610152733f4bd7e2f430834efa031de6393399d40a754d855507d1964891964f02b4d34de5166e7
ab3dd6692d2f4754f34ba5ceda3c632e399023dec1e2faf9edb6445e951a
#END

#BEGIN DEVICE
	@LocalIOMaster, 12, 27
	@RamFS, 1, 1
	@UserLog, 7, 11
	@IntEthernet, 4, 2
	@DMLogger, 5, 10
	@IntModTCPClient, 9, 14, 1000, 2, 60
	@IntEIPClient, 22, 31, 1000, 2, 60
	@IntEthDMPPClient, 23, 32, 50, 250, 2
	@IntSerModbusClient, 8, 13
	@SERIO_004_A, 16385, 23
	@SERIO_004_B, 17409, 23
	@ODH, 18433, 25
	@LCO_smtp, 32769, 7, 2347065611, 25, 30000, LVM-PLC@lco.cl, 0, 110, , , 0, smtp-01.lco.cl
	@EthIOMaster, 13, 27
	@CTRIO_003, 16387, 6
	@Dome_encoder, 17411, 16
#END

#BEGIN MEM_CONFIG
	X	BIT	decimal	2048	-1
	Y	BIT	decimal	2048	-1
	WX	SWORD	decimal	256	-1
	WY	SWORD	decimal	256	-1
	C	BIT	decimal	2048
	V	UWORD	decimal	4096
	N	SWORD	decimal	4096
	D	SDWORD	decimal	4096
	R	REAL	decimal	4096
	T	TIMER	decimal	256
	CT	COUNTER	decimal	256
	SS	STRING	decimal	128
	SL	STRING	decimal	64
	UDT	DATETIME	decimal	32
	PL	UWORD	decimal	256
	DLX	BIT	octal	01000	-1
	DLY	BIT	octal	01000	-1
	DLC	BIT	octal	01000
	DLV	UWORD	octal	04000
	MI	BIT	decimal	1024
	MC	BIT	decimal	1024
	MIR	SWORD	decimal	2048
	MHR	SWORD	decimal	2048
	RX	REAL	decimal	256	-1
	RY	REAL	decimal	256	-1
	dmlogger	UBYTE	decimal	256
	MSG	STRING		0
	ERR	STRING		0
	SysName	STRING		0
	SysDesc	STRING		0
	SerialNum	STRING		0
	PartNum	STRING		0
	Drive	PROGRAM		0	-1
	Lights	<Virtual>		0
	Heartbeat	PROGRAM		0
	Rain	PROGRAM		0	-1
	Drive_new	PROGRAM		0	-1
	Heartbeat_new	PROGRAM		0	-1
#END

// Beginning of Code Block Lights
$LGCMOD	Lights

// Rung Lights#1
// Offset 0
STR	C2000
NOT
OUT	C2000

// Rung Lights#2
// Offset 3
RET

// End of Code Block Lights
$LGCEND	Lights

// Beginning of Code Block $Main
$PRGRM	$Main

// Rung $Main#1
// Offset 0
#BEGIN FMT_COMMENT 
" "
#END

STR	ST0
DUPBOOL
AND	ST1
INIT	"3 D0 ST1023 75 D1 ST1023 165000 D2 ST1023 2000 MC100 ST1023 0 MC102 ST1023 1 MHR510 ST1023 70 D10 ST1023 0 MC201 ST1023 0 MC202 ST1023 0 UDT0.Date ST1023 SDT0.Date UDT0.Time ST1023 SDT0.Time D4 ST1023 DST21 C0 ST1023 0 MC700 ST1023 0 MHR700 ST1023 0 MHR701 ST1023 0 V100 ST1023 80 V101 ST1023 70 C1000 ST1023 1 MC111 MC113 0"
POPBOOL
DUPBOOL
AND	X24
CALL	Lights	0x1	DST511	"3 Y0 C2000 1"	"3 C2000 Y0 1"
POPBOOL
DUPBOOL
AND	X25
CALL	Lights	0x1	DST511	"3 Y1 C2000 1"	"3 C2000 Y1 1"
POPBOOL
DUPBOOL
AND	X26
CALL	Lights	0x1	DST511	"3 Y2 C2000 1"	"3 C2000 Y2 1"
POPBOOL
DUPBOOL
AND	X27
CALL	Lights	0x1	DST511	"3 Y3 C2000 1"	"3 C2000 Y3 1"
POPBOOL
DUPBOOL
AND	X28
CALL	Lights	0x1	DST511	"3 Y4 C2000 1"	"3 C2000 Y4 1"
POPBOOL
AND	X29
CALL	Lights	0x1	DST511	"3 Y5 C2000 1"	"3 C2000 Y5 1"

// Rung $Main#2
// Offset 130
#BEGIN FMT_COMMENT 
"Read GS3 drive Elements using the cpu rs-232 port"
#END

STR	T10.Done
MRX	@IntSerModbusClient	0	0	1	3	8449	8	MHR411	0x0	0	0x0	C100	C200	DST511
MRX	@IntSerModbusClient	0	0	1	3	8449	8	MHR411	0x0	0	0x0	C100	C200	DST511
COPY	0x1	"4 0x0 MHR415 MHR130 1"

// Rung $Main#3
// Offset 159
STR	T10.Done
MRX	@IntSerModbusClient	0	0	1	3	8450	1	MHR1024	0x0	0	0x0	C101	C201	DST511

// Rung $Main#4
// Offset 171
#BEGIN FMT_COMMENT 
"Copy the encoder counts output to MHR150<br> <br>"
"- If motor is not moving, send data every minute.<br>"
"- If motor is moving, send data every second."
#END

STRN	MHR1024:0
ANDN	MHR1024:1
COPY	0x0	"4 0x0 0 MHR152 1"
ANDPD	ST3
STR	MHR1024:0
AND	MHR1024:1
ANDPD	ST4
ORSTR
OR	$Dome_encoder.Reset
DUPBOOL
AND	$Dome_encoder.Reset
COPY	0x0	"4 0x0 0 MHR150 1 0x0 0 MHR151 1"
POPBOOL
ANDN	$Dome_encoder.Reset
ANDGE	$Dome_encoder.fReg1	0
MATH	MHR152	"(ABS($Dome_encoder.iReg1 - MHR150) * 9525) / 10850"
SET	C6

// Rung $Main#5
// Offset 219
STR	C6
ANDGE	$Dome_encoder.fReg1	0
COPY	0x0	"4 0x0 $Dome_encoder.iReg1 MHR150 1"
SCALE	$Dome_encoder.iReg1	0	10850	0	9525	MHR151
RST	C6

// Rung $Main#6
// Offset 238
STR	MC109
ANDNE	$Dome_encoder.iReg1	0
ANDGE	$Dome_encoder.iReg1	-18
ANDLE	$Dome_encoder.iReg1	18
SET	$Dome_encoder.Reset

// Rung $Main#7
// Offset 252
STR	$Dome_encoder.Reset
ANDE	$Dome_encoder.iReg1	0
RST	$Dome_encoder.Reset

// Rung $Main#8
// Offset 258
#BEGIN FMT_COMMENT 
"Read ODH variables for sensor 2 through Serio-4 every 2 seconds."
#END

STRPD	ST4
MRX	@ODH	0	0	1	3	202	5	V605	0x0	0	0x0	C102	C202	DST511
RST	C600
MOVE	V600	MHR600
MOVE	V603	MHR602
MOVE	V604	MHR604

// Rung $Main#9
// Offset 278
#BEGIN FMT_COMMENT 
"Read ODH variables for sensor 1 through Serio-4 every 2 seconds."
#END

STRND	ST4
MRX	@ODH	0	0	1	3	102	5	V600	0x0	0	0x0	C103	C203	DST511
SET	C600
MOVE	V605	MHR601
MOVE	V608	MHR603
MOVE	V609	MHR605

// Rung $Main#10
// Offset 298
STRPD	ST4
COPY	0x1	"4 0x0 T8.Acc MHR700 1 0x0 T7.Acc MHR701 1"

// Rung $Main#11
// Offset 308
STRN	C1000
AND	ST1
RUN	Drive
HALT	Drive_new

// Rung $Main#12
// Offset 313
STR	C1000
AND	ST1
RUN	Drive_new
HALT	Drive

// Rung $Main#13
// Offset 318
STR	ST1
DUPBOOL
ANDN	C1000
RUN	Heartbeat
HALT	Heartbeat_new
POPBOOL
AND	C1000
RUN	Heartbeat_new
HALT	Heartbeat

// Rung $Main#14
// Offset 329
STR	ST1
RUN	Rain

// Rung $Main#15
// Offset 332
STRN	X16
ORN	X18
ANDN	MC900
OUT	MC3

// Rung $Main#16
// Offset 336
STR	X16
OUT	MC1

// Rung $Main#17
// Offset 338
STR	X18
OUT	MC2

// Rung $Main#18
// Offset 340
STR	MC235
CALL	Lights	0x1	DST511	"3 Y0 C2000 1"	"3 C2000 Y0 1"
RST	MC235

// Rung $Main#19
// Offset 353
STR	X24
OUT	MC335

// Rung $Main#20
// Offset 355
STR	MC236
CALL	Lights	0x1	DST511	"3 Y1 C2000 1"	"3 C2000 Y1 1"
RST	MC236

// Rung $Main#21
// Offset 368
STR	X25
OUT	MC336

// Rung $Main#22
// Offset 370
STR	MC237
CALL	Lights	0x1	DST511	"3 Y2 C2000 1"	"3 C2000 Y2 1"
COPY	0x1	"4 0x0 DST21 D4 1"
RST	C0
RST	MC237

// Rung $Main#23
// Offset 390
STR	X26
OUT	MC337

// Rung $Main#24
// Offset 392
STR	MC238
CALL	Lights	0x1	DST511	"3 Y3 C2000 1"	"3 C2000 Y3 1"
RST	MC238

// Rung $Main#25
// Offset 405
STR	X27
OUT	MC338

// Rung $Main#26
// Offset 407
STR	MC239
CALL	Lights	0x1	DST511	"3 Y4 C2000 1"	"3 C2000 Y4 1"
RST	MC239

// Rung $Main#27
// Offset 420
STR	X28
OUT	MC339

// Rung $Main#28
// Offset 422
STR	MC240
CALL	Lights	0x1	DST511	"3 Y5 C2000 1"	"3 C2000 Y5 1"
RST	MC240

// Rung $Main#29
// Offset 435
STR	X29
OUT	MC340

// Rung $Main#30
// Offset 437
STRND	MC3
ANDN	MC900
DUPBOOL
AND	X28
CALL	Lights	0x1	DST511	"3 Y4 C2000 1"	"3 C2000 Y4 1"
POPBOOL
AND	X29
CALL	Lights	0x1	DST511	"3 Y5 C2000 1"	"3 C2000 Y5 1"

// Rung $Main#31
// Offset 466
STR	X36
OUT	MC105

// Rung $Main#32
// Offset 468
STR	X38
OUT	MC106

// Rung $Main#33
// Offset 470
STR	X32
OUT	MC107

// Rung $Main#34
// Offset 472
STR	X34
OUT	MC108

// Rung $Main#35
// Offset 474
#BEGIN FMT_COMMENT 
" "
#END

STRN	X36
ORN	X32
ANDN	MC110
ANDN	MHR412:0
ANDN	MHR412:1
ANDLE	$Dome_encoder.iReg1	18
OUT	MC109

// Rung $Main#36
// Offset 484
#BEGIN FMT_COMMENT 
" "
#END

STR	X38
OR	X34
ANDN	MC109
ANDN	MHR412:0
ANDN	MHR412:1
ANDGE	$Dome_encoder.iReg1	10800
OUT	MC110

// Rung $Main#37
// Offset 494
#BEGIN FMT_COMMENT 
"HVAC Flag to activate telescope platforms inyectors.<br>"
" <br>Fans will be turned on, if signal is off.<br> <br>"
"Fans should be turned off, if dome is open (not closed) or "
"local enebeled."
#END

STRN	MC109
OR	MC3
OUT	Y8

// Rung $Main#38
// Offset 497
STR	X40
OUT	MC200
RST	MC201

// Rung $Main#39
// Offset 500
STR	MC201
OUT	Y14

// Rung $Main#40
// Offset 502
STR	MC202
OUT	Y13

// Rung $Main#41
// Offset 504
STR	MC202
ANDN	X40
TMR	T12	1000

// Rung $Main#42
// Offset 508
STR	T12.Done
RST	MC202

// Rung $Main#43
// Offset 510
STRN	C5
STRPRINT	SL1	0x4	"""#file:"" SL2 ""#"" DST21 "" "" SL0 ""$0D$0A"""
STRCOPY	SL0	SL3	1
SET	C9

// Rung $Main#44
// Offset 532
STR	C9
STREAMOUT	@DMLogger	0x0	SL1	DST511	DST511	0x0	0x0	C3	C4
RST	C9

// Rung $Main#45
// Offset 542
STR	ST1
STRPRINT	SL0	0x5	"MC1 MC2 MC3 MC100 MC102 MC105 MC106 MC107 MC108 MC109 MC110 MC200 MC201 MC202 MC235 MC236 MC237 MC238 MC239 MC240 MC335 MC336 MC337 MC338 MC339 MC340 MC600 MC601 MC602 MC900 MHR1024"
STRCMP	SL3	0x2	C5	ST1023	ST1023	SL0

// Rung $Main#46
// Offset 616
STR	ST3
DTCMP	UDT0	UDT1	0x1	C10	ST1023	ST1023
EPOCH2DT	DST21	UDT1

// Rung $Main#47
// Offset 625
STRN	C10
EPOCH2DT	DST21	UDT0
SET	C11

// Rung $Main#48
// Offset 629
STR	C11
STRPRINT	SL2	0x4	"""C:\logs\"" UDT0.Year ""_"" UDT0.Month ""_"" UDT0.Day "".txt"""
RST	C11

// Rung $Main#49
// Offset 650
STR	C1
OR	C2
STRPRINT	SL4	0x4	"""#file:C:\logs\smtp.log#"" DST21 "" "" MSG "" "" ERR ""$0D$0A"""
SET	C7
RST	C1
RST	C2

// Rung $Main#50
// Offset 676
STR	C7
STREAMOUT	@DMLogger	0x0	SL4	DST511	DST511	0x0	0x0	C8	C12
RST	C7

// Rung $Main#51
// Offset 686
STRN	C0
MATH	C0	"DST21 >= (D4 + 3)"

// Rung $Main#52
// Offset 697
#BEGIN FMT_COMMENT 
"Send an email when the lights of the spectrograph room are "
"turned on manualy<br> "
#END

STRN	MC237
ANDPD	X26
AND	C0
ANDPDPF
ANDN	MC901
EMAIL	@LCO_smtp	"""lvm-critical@sdss.org"""	""""""	""""""	"""Someone entered the Spectrograph room"""	0x0	"""Someone turned on the lights on the spectrograph room at "" SDT0.Day ""/"" SDT0.Month ""/"" SDT0.Year "" "" SDT0.Hour "":"" SDT0.Minute "" Local time."""	0x0	C1	C2

// Rung $Main#53
// Offset 769
#BEGIN FMT_COMMENT 
"Send an email when the lights of the spectrograph room are "
"turned off manually "
#END

STRN	MC237
ANDND	X26
AND	C0
ANDPDPF
ANDN	MC901
EMAIL	@LCO_smtp	"""lvm-critical@sdss.org"""	""""""	""""""	"""Someone left the Spectrograph room"""	0x0	"""Someone turned off the lights on the spectrograph room at "" SDT0.Day ""/"" SDT0.Month ""/"" SDT0.Year "" "" SDT0.Hour "":"" SDT0.Minute "" Local time."""	0x0	C1	C2

// Rung $Main#54
// Offset 840
STRN	T10.Done
TMR	T10	500

// Rung $Main#55
// Offset 843
#BEGIN FMT_COMMENT 
"Define day change for warning error changes.<br> <br>"
"For example, if the coin battery dies."
#END

STR	ST3
COPY	0x1	"4 0x0 SDT0.Day V0 1"

// Rung $Main#56
// Offset 850
#BEGIN FMT_COMMENT 
"Send e-mail to lvm critical, if battery is low."
#END

STRPD	ST149
STRPRINT	SS0	0x5	"""Coin cell battery has been depleted since "" SDT0.Day ""/"" SDT0.Month ""/"" SDT0.Year "". Please replace it with a 2032 coin cell battery."""
EMAIL	@LCO_smtp	"""lvm-critical@sdss.org"""	""""""	""""""	"""Someone entered the Spectrograph room"""	0x0	"""Coin cell battery has been depleted since "" SDT0.Day ""/"" SDT0.Month ""/"" SDT0.Year "". Please replace it with a 2032 coin cell battery."""	0x0	C1	C2

// Rung $Main#57
// Offset 956
#BEGIN FMT_COMMENT 
"Resend battery e-mail every day at midnight"
#END

STR	ST149
ANDNE	V0	SDT0.Day
ANDPDPF
EMAIL	@LCO_smtp	"""lvm-critical@sdss.org"""	""""""	""""""	"""Someone entered the Spectrograph room"""	0x0	"SS0"	0x0	C1	C2

// End of Code Block $Main
$PGMEND	$Main

// Beginning of Code Block Drive
$PRGRM	Drive

// Rung Drive#1
// Offset 0
SG	Drive.S0

// Rung Drive#2
// Offset 2
STRNE	MHR510	MHR410
MWX	@IntSerModbusClient	0	0	1	6	2331	1	MHR510	0x0	0	0x0	C108	C208	DST511

// Rung Drive#3
// Offset 17
#BEGIN FMT_COMMENT 
"Select the direction of the motor.<br>"
"Off =%3E Forward direction (Close roll-off)<br>"
"On =%3E Reverse direction (Open roll-off)"
#END

STRNE	MC102	MHR1024:4
DUPBOOL
AND	MC102
MWX	@IntSerModbusClient	0	0	1	6	2333	1	1	0x0	0	0x0	C109	C209	DST511
POPBOOL
ANDN	MC102
MWX	@IntSerModbusClient	0	0	1	6	2333	1	0	0x0	0	0x0	C109	C209	DST511

// Rung Drive#4
// Offset 47
#BEGIN FMT_COMMENT 
"To move the roll off, the system has to be in:<br>"
"Remote mode (local enable off)<br>"
"E-stop not triggered (Estop_status off)<br>"
"Motor direction commanded has to agree with GS3 direction "
"(Motor_dir ==  Status_2:4)"
#END

STR	MC100
ANDN	MC3
ANDN	X40
ANDE	MC102	MHR1024:4
JMP	Drive.S1

// Rung Drive#5
// Offset 55
#BEGIN FMT_COMMENT 
"Local enable is normally open, as system will jump to "
"Local enabled stage if Local_enable is on (Local mode)"
#END

STR	MC3
JMP	Drive.S3

// Rung Drive#6
// Offset 57
SG	Drive.S1

// Rung Drive#7
// Offset 59
STR	MC100
MWX	@IntSerModbusClient	0	0	1	6	2332	1	V2332	0x0	0	0x1	Drive.S2	C211	V1006
TMR	T2	2000

// Rung Drive#8
// Offset 73
STR	T2.Done
AND	X40
JMP	Drive.S0
RST	MC100

// Rung Drive#9
// Offset 77
SG	Drive.S2

// Rung Drive#10
// Offset 79
STR	ST1
TMR	T1	D2

// Rung Drive#11
// Offset 82
STR	ST1
TMR	T0	D1
COPY	0x1	"4 0x0 T0.Acc R0 1"

// Rung Drive#12
// Offset 91
#BEGIN FMT_COMMENT 
"Set the parameters to stop the drive:<br>"
"- In case of current above 10 A (100)<br>"
"- In case of user command (MC 100)<br>"
"- Dome timeout (set to 2 min 25 sec)<br>"
"Disabled a lower value for overcurrent & timeout of 5 "
"sec.<br> <br>If heartbeat is lost, wait to close, and jump "
"to error state<br> <br>"
"If local mode activated, stop dome and jump to error state."
#END

STRGE	MHR415	120
AND	MC102
STR	X36
OR	X32
ANDSTR
STR	X38
OR	X34
ANDSTR
STRN	MC102
STRN	X36
ORN	X32
ANDSTR
STRN	X38
ORN	X34
ANDSTR
ORSTR
STR	ST2
ANDGE	MHR415	140
AND	T1.Done
ORSTR
ORNE	MHR411	0
ORN	MC100
OR	T0.Done
ANDN	MC3
DUPBOOL
ANDN	MC602
ANDN	T0.Done
MWX	@IntSerModbusClient	0	0	1	6	2332	1	0	0x0	0	0x1	Drive.S0	C212	V1006
RST	MC100
POPBOOL
STR	MC602
OR	T0.Done
ANDSTR
MWX	@IntSerModbusClient	0	0	1	6	2332	1	0	0x0	0	0x1	Drive.S3	C213	V1006
RST	MC100
SET	MC103

// Rung Drive#13
// Offset 156
STR	MC3
MWX	@IntSerModbusClient	0	0	1	6	2332	1	0	0x0	0	0x1	Drive.S3	C214	V1006

// Rung Drive#14
// Offset 168
SG	Drive.S3

// Rung Drive#15
// Offset 170
STRN	MC3
ANDN	MC602
ANDN	MC104
JMP	Drive.S0
RST	MC100
RST	MC103
RST	MC104

// End of Code Block Drive
$PGMEND	Drive

// Beginning of Code Block Heartbeat
$PRGRM	Heartbeat

// Rung Heartbeat#1
// Offset 0
SG	Heartbeat.S0

// Rung Heartbeat#2
// Offset 2
STR	ST1
TMR	T3	60000

// Rung Heartbeat#3
// Offset 5
STR	MC600
RST	MC600
SET	MC601
RST	MC602
SETNUMR	D10	D10	0
JMP	Heartbeat.S1

// Rung Heartbeat#4
// Offset 13
STR	T3.Done
ANDN	MC600
RSTT	T3
INC	D10

// Rung Heartbeat#5
// Offset 17
STRGE	D10	3
ANDN	MC900
JMP	Heartbeat.S3
SETNUMR	D10	D10	0

// Rung Heartbeat#6
// Offset 26
SG	Heartbeat.S1

// Rung Heartbeat#7
// Offset 28
STR	ST1
TMR	T4	3000

// Rung Heartbeat#8
// Offset 31
STR	T4.DN
RST	MC601
JMP	Heartbeat.S0

// Rung Heartbeat#9
// Offset 34
SG	Heartbeat.S3

// Rung Heartbeat#10
// Offset 36
STRN	Drive.S0
RST	MC100

// Rung Heartbeat#11
// Offset 38
STRN	MHR1024:0
ANDN	MHR1024:1
AND	MC102
AND	Drive.S0
RST	MC102

// Rung Heartbeat#12
// Offset 43
STRN	MHR1024:0
ANDN	MHR1024:1
ANDN	MHR1024:3
ANDN	MHR1024:4
AND	Drive.S0
SET	MC100
JMP	Heartbeat.S4

// Rung Heartbeat#13
// Offset 50
SG	Heartbeat.S4

// Rung Heartbeat#14
// Offset 52
STRN	MC602
SET	MC602
RSTT	T5

// Rung Heartbeat#15
// Offset 55
STR	MC602
DUPBOOL
AND	T6.Zero
ANDN	MC901
EMAIL	@LCO_smtp	"""lvm-critical@sdss.org"""	""""""	""""""	"""Critical:PLC connection lost"""	0x1	"""PLC has lost communication with the server for "" D3 "" seconds"""	0x0	C1	C2
POPBOOL
DUPBOOL
ANDN	T6.Done
TMR	T6	300000
POPBOOL
AND	ST1
TMRAG	T5	0
MATH	D3	"(T5.Acc / 1000) + 180"

// Rung Heartbeat#16
// Offset 122
STR	T6.Done
RSTT	T6

// Rung Heartbeat#17
// Offset 124
STR	MC600
SET	MC601
RST	MC600
RST	MC602
RSTT	T5
JMP	Heartbeat.S1
ANDN	MC901
EMAIL	@LCO_smtp	"""lvm-critical@sdss.org"""	""""""	""""""	"""Critical: PLC conection restored"""	0x1	"""PLC to server communication restored after "" D3 "" seconds"""	0x1	Heartbeat.S1	C2

// End of Code Block Heartbeat
$PGMEND	Heartbeat

// Beginning of Code Block Rain
$PRGRM	Rain

// Rung Rain#1
// Offset 0
#BEGIN FMT_COMMENT 
"The rain sensor was connected using a negated logic (off = "
"1 & on = 0). Therefore, there are two cases were the input "
"will be activated<br> <br> 1. There is rain.<br>"
" 2. There is an issue with the system.<br> <br>"
"The output logic is negated, to show a logic 1 if there is "
"rain."
#END

SG	Rain.S0

// Rung Rain#2
// Offset 2
STRN	X47
JMP	Rain.S1
SET	MC700

// Rung Rain#3
// Offset 5
#BEGIN FMT_COMMENT 
"Rain bit will be on, for 15 min after rain sensor is "
"cleared.<br> <br>Once time has past, it goes back to idle"
#END

SG	Rain.S1

// Rung Rain#4
// Offset 7
STR	X47
TMRDOWN	T7	900000

// Rung Rain#5
// Offset 11
STR	ST1
TMR	T8	3600000

// Rung Rain#6
// Offset 15
STR	T7.Done
SET	C13

// Rung Rain#7
// Offset 17
STR	X47
AND	T7.Done
JMP	Rain.S0
RST	MC700

// End of Code Block Rain
$PGMEND	Rain

// Beginning of Code Block Drive_new
$PRGRM	Drive_new

// Rung Drive_new#1
// Offset 0
SG	Drive_new.S0

// Rung Drive_new#2
// Offset 2
#BEGIN FMT_COMMENT 
"Select the direction of the motor.<br>"
"Off =%3E Forward direction (Close roll-off)<br>"
"On =%3E Reverse direction (Open roll-off)"
#END

STRN	MC700
ANDN	MC602
ANDNE	MC102	MHR1024:4
DUPBOOL
AND	MC102
MWX	@IntSerModbusClient	0	0	1	6	2333	1	1	0x0	0	0x0	C109	C209	DST511
POPBOOL
ANDN	MC102
MWX	@IntSerModbusClient	0	0	1	6	2333	1	0	0x0	0	0x0	C109	C209	DST511

// Rung Drive_new#3
// Offset 34
#BEGIN FMT_COMMENT 
"If it starts raining, system will automatically set drive "
"direction to close."
#END

STR	MC602
OR	MC700
ANDN	MC109
DUPBOOL
AND	T13.Done
MWX	@IntSerModbusClient	0	0	1	6	2333	1	0	0x0	0	0x0	C109	C209	DST511
SET	MC100
RST	MC102
POPBOOL
ANDN	T13.Done
TMR	T13	1000

// Rung Drive_new#4
// Offset 56
#BEGIN FMT_COMMENT 
"Jump to remove brakes. As brakes aren't connected, it will "
"jump to start movement"
#END

STRN	MC111
ANDN	MC700
ANDN	MC602
AND	MC100
ANDE	MC102	MHR1024:4
ANDN	MHR1024:1
ANDN	MHR1024:0
STRE	MHR1024:4	0
STR	MC700
OR	MC602
ANDSTR
ANDN	MHR1024:1
ANDN	MHR1024:0
ANDN	MC109
AND	MC100
ORSTR
JMP	Drive_new.S2
AND	ST2
JMP	Drive_new.S1

// Rung Drive_new#5
// Offset 81
STR	MC602
OR	MC700
AND	MC109
OR	X40
OR	MC3
ANDN	MHR1024:1
ANDN	MHR1024:0
JMP	Drive_new.S10
SET	MC111

// Rung Drive_new#6
// Offset 90
SG	Drive_new.S1

// Rung Drive_new#7
// Offset 92
STR	ST1
SET	Y9
SET	Y10
TMRDOWN	T9	10000

// Rung Drive_new#8
// Offset 97
STR	T9.Done
ANDN	MC3
ANDN	X40
JMP	Drive_new.S2

// Rung Drive_new#9
// Offset 101
STR	MC3
OR	X40
JMP	Drive_new.S7

// Rung Drive_new#10
// Offset 104
SG	Drive_new.S2

// Rung Drive_new#11
// Offset 106
STRNE	V100	MHR413
MWX	@IntSerModbusClient	0	0	1	6	2331	1	V100	0x0	0	0x0	C108	C208	DST511

// Rung Drive_new#12
// Offset 121
STR	MC100
ANDE	V100	MHR413
ANDN	MC3
ANDN	X40
MWX	@IntSerModbusClient	0	0	1	6	2332	1	1	0x0	0	0x0	C111	C211	V1006

// Rung Drive_new#13
// Offset 139
STR	MHR1024:1
AND	MHR1024:0
ANDN	MC3
ANDN	X40
DUPBOOL
AND	MHR1024:4
AND	MHR1024:3
JMP	Drive_new.S3
POPBOOL
ANDN	MHR1024:4
ANDN	MHR1024:3
JMP	Drive_new.S5

// Rung Drive_new#14
// Offset 151
STR	MC3
ORN	MC100
OR	X40
JMP	Drive_new.S7

// Rung Drive_new#15
// Offset 155
SG	Drive_new.S3

// Rung Drive_new#16
// Offset 157
STR	ST1
TMRDOWN	T0	D20
COPY	0x1	"4 0x0 T0.Acc R0 1 0x0 T0.Acc R1 1"

// Rung Drive_new#17
// Offset 168
STR	X38
OR	X34
ORGE	$Dome_encoder.iReg1	D100
MWX	@IntSerModbusClient	0	0	1	6	2331	1	V101	0x0	0	0x1	Drive_new.S4	C208	DST511

// Rung Drive_new#18
// Offset 185
STR	T0.Done
ORNE	MHR411	0
OR	MC3
OR	X40
ORN	MC100
OR	MC700
JMP	Drive_new.S7

// Rung Drive_new#19
// Offset 195
SG	Drive_new.S4

// Rung Drive_new#20
// Offset 197
STR	ST1
TMRDOWN	T0	D21
TMRDOWN	T11	D22
COPY	0x1	"4 0x0 T0.Acc R0 1 0x0 T11.Acc R3 1 0x0 T0.Acc R2 1"

// Rung Drive_new#21
// Offset 212
STR	MC700
OR	MC602
OR	T0.Done
OR	MC3
OR	X40
ORNE	MHR411	0
ORN	MC100
STRGE	MHR415	120
ANDGE	$Dome_encoder.iReg1	D101
ORSTR
STRGE	MHR415	120
AND	T11.Done
ORSTR
STRGE	$Dome_encoder.iReg1	D101
AND	T11.Done
ORSTR
JMP	Drive_new.S7

// Rung Drive_new#22
// Offset 244
SG	Drive_new.S5

// Rung Drive_new#23
// Offset 246
STR	ST1
TMRDOWN	T0	D23
TMRDOWN	T11	D24
COPY	0x1	"4 0x0 T0.Acc R0 1 0x0 T11.Acc R5 1 0x0 T0.Acc R4 1"

// Rung Drive_new#24
// Offset 261
STR	T0.Done
ORNE	MHR411	0
OR	MC3
OR	X40
ORN	MC100
JMP	Drive_new.S7

// Rung Drive_new#25
// Offset 270
STR	T11.Done
ORLE	$Dome_encoder.iReg1	D102
MWX	@IntSerModbusClient	0	0	1	6	2331	1	V101	0x0	0	0x1	Drive_new.S6	C208	DST511

// Rung Drive_new#26
// Offset 286
SG	Drive_new.S6

// Rung Drive_new#27
// Offset 288
STR	ST1
TMRDOWN	T0	D25
COPY	0x1	"4 0x0 T0.Acc R0 1 0x0 T0.Acc R6 1"

// Rung Drive_new#28
// Offset 299
STR	T0.Done
ORNE	MHR411	0
OR	MC3
OR	X40
ORN	MC100
STRGE	MHR415	120
ANDLE	$Dome_encoder.iReg1	0
ORSTR
STRGE	MHR415	120
STRN	X36
ORN	X32
ANDSTR
ORSTR
STRLE	$Dome_encoder.iReg1	0
STRN	X36
ORN	X32
ANDSTR
ORSTR
JMP	Drive_new.S7

// Rung Drive_new#29
// Offset 333
SG	Drive_new.S7

// Rung Drive_new#30
// Offset 335
STR	ST1
MWX	@IntSerModbusClient	0	0	1	6	2332	1	0	0x0	0	0x1	Drive_new.S11	C211	V1006
RST	MC100

// Rung Drive_new#31
// Offset 348
SG	Drive_new.S11

// Rung Drive_new#32
// Offset 350
STRN	MHR1024:1
ANDN	MHR1024:0
DUPBOOL
AND	ST2
JMP	Drive_new.S8
POPBOOL
DUPBOOL
STRE	R0	0
ORNE	MHR411	0
ANDSTR
ANDN	X40
ANDN	MC3
JMP	Drive_new.S9
SET	MC112
POPBOOL
ANDNE	R0	0
ANDE	MHR411	0
JMP	Drive_new.S0

// Rung Drive_new#33
// Offset 380
STR	X40
OR	MC3
JMP	Drive_new.S10
SET	MC111

// Rung Drive_new#34
// Offset 384
SG	Drive_new.S8

// Rung Drive_new#35
// Offset 386
STR	ST1
RST	Y9
RST	Y10
TMRDOWN	T9	10000

// Rung Drive_new#36
// Offset 391
STR	T9.Done
DUPBOOL
STRE	R0	0
ORNE	MHR411	0
ANDSTR
ANDN	X40
ANDN	MC3
JMP	Drive_new.S9
POPBOOL
ANDNE	R0	0
ANDE	MHR411	0
JMP	Drive_new.S0

// Rung Drive_new#37
// Offset 415
STR	X40
OR	MC3
JMP	Drive_new.S10
SET	MC111

// Rung Drive_new#38
// Offset 419
SG	Drive_new.S9

// Rung Drive_new#39
// Offset 421
STR	MC100
RST	MC100

// Rung Drive_new#40
// Offset 423
STR	MC113
ANDE	MHR411	0
JMP	Drive_new.S0
RST	MC112
RST	MC113

// Rung Drive_new#41
// Offset 431
SG	Drive_new.S10

// Rung Drive_new#42
// Offset 433
STRN	MC700
ANDN	MC602
ANDN	X40
ANDN	MC3
JMP	Drive_new.S0
RST	MC111
RST	MC100

// Rung Drive_new#43
// Offset 440
STR	MC100
RST	MC100

// End of Code Block Drive_new
$PGMEND	Drive_new

// Beginning of Code Block Heartbeat_new
$PRGRM	Heartbeat_new

// Rung Heartbeat_new#1
// Offset 0
SG	Heartbeat_new.S0

// Rung Heartbeat_new#2
// Offset 2
STR	ST1
TMR	T3	60000

// Rung Heartbeat_new#3
// Offset 5
STR	MC600
RST	MC600
SET	MC601
SETNUMR	D10	D10	0
JMP	Heartbeat_new.S1

// Rung Heartbeat_new#4
// Offset 12
STR	T3.Done
ANDN	MC600
RSTT	T3
INC	D10

// Rung Heartbeat_new#5
// Offset 16
STRGE	D10	3
ANDN	MC900
JMP	Heartbeat_new.S4
SETNUMR	D10	D10	0
SET	MC602

// Rung Heartbeat_new#6
// Offset 26
SG	Heartbeat_new.S1

// Rung Heartbeat_new#7
// Offset 28
STR	ST1
TMR	T4	3000

// Rung Heartbeat_new#8
// Offset 31
STR	T4.DN
RST	MC601
JMP	Heartbeat_new.S0

// Rung Heartbeat_new#9
// Offset 34
SG	Heartbeat_new.S4

// Rung Heartbeat_new#10
// Offset 36
STR	MC602
DUPBOOL
AND	T6.Zero
ANDN	MC901
EMAIL	@LCO_smtp	"""lvm-critical@sdss.org"""	""""""	""""""	"""Critical:PLC connection lost"""	0x1	"""PLC has lost communication with the server for "" D3 "" seconds"""	0x0	C1	C2
POPBOOL
DUPBOOL
ANDN	T6.Done
TMR	T6	300000
POPBOOL
AND	ST1
TMR	T5	0
MATH	D3	"(T5.Acc / 1000) + 180"

// Rung Heartbeat_new#11
// Offset 103
STR	T6.Done
RSTT	T6

// Rung Heartbeat_new#12
// Offset 105
STR	MC600
DUPBOOL
AND	ST1
SET	MC601
RST	MC600
RST	MC602
RSTT	T5
POPBOOL
DUPBOOL
ANDN	MC901
EMAIL	@LCO_smtp	"""lvm-critical@sdss.org"""	""""""	""""""	"""Critical: PLC conection restored"""	0x1	"""PLC to server communication restored after "" D3 "" seconds"""	0x1	Heartbeat_new.S1	C2
POPBOOL
AND	MC901
JMP	Heartbeat_new.S1

// Rung Heartbeat_new#13
// Offset 161
NOP

// Rung Heartbeat_new#14
// Offset 162
NOP

// End of Code Block Heartbeat_new
$PGMEND	Heartbeat_new

#BEGIN ELEMENT_DOC
"X16","Door_locked_in","",""
"X18","Door_closed_in","",""
"X24","Ctl_lights_in","","Control room lights current sensor input"
"X25","Utl_room_in","","Utilities room lights current sensor input"
"X26","Spec_lights_in","","Spectrograph room lights current sensor input"
"X27","Mze_lights_in","","Mezzanine lights current sensor input"
"X28","Plat_Wlights_in","","Platform white light current sensor input"
"X29","Plat_Rlights_in","","Platform red light current sensor input"
"X32","LS_NW_in","",""
"X34","LS_SW_in","",""
"X36","LS_NE_in","",""
"X38","LS_SE_in","",""
"X40","Estop_status","","Shows if E-stop is active"
"X47","rain_sen_in","",""
"Y0","Ctl_lights_out","","Control room lights relay out"
"Y1","Utl_lights_out","","Utilities room lights relay out"
"Y2","Spec_lights_out","","Spectrograph room lights relay out"
"Y3","Mze_lights_out","","Mezzanine room lights relay out"
"Y4","Plat_Wlight_out","","Roll-off White light relay out"
"Y5","Plat_Rlight_out","","Roll-off Red light relay out"
"Y8","HVAC_flag","","Flag to stop telescope platform fans"
"Y9","Brake_start","",""
"Y10","brake_mantain","",""
"Y13","PLC_Estop_releas","","PLC reset e-stop output"
"Y14","PLC_Estop","","PLC e-stop output"
"C7","SMTP_log","","Sends information to dmlogger when smpt message is sent"
"C13","rain_time_done","",""
"C100","","","Success read"
"C101","","","Success read"
"C102","","","Success read"
"C103","","","Success read"
"C104","","","Success read"
"C105","","","Success read"
"C106","","","Success read"
"C107","","","Success read"
"C108","","","Success read"
"C109","","","Success read"
"C110","","","Success read"
"C200","","","Error read"
"C201","","","Error read"
"C202","","","Error read"
"C203","","","Error read"
"C204","","","Error read"
"C205","","","Error read"
"C206","","","Error read"
"C207","","","Error read"
"C208","","","Error read"
"C209","","","Error read"
"C210","","","Error read"
"C211","","","Error read"
"C212","","","Error read"
"C213","","","Error read"
"C214","","","Error read"
"C1000","Roof_logic_sel","","Roll off logic selector, while tests are done"
"V100","Drive_speed_a","",""
"V101","Drive_speed_b","",""
"D0","Overcurrent_lim","",""
"D1","Dome_move_tout","",""
"D2","curr_delay_val","",""
"D3","HB_err_seconds","",""
"D4","UTC","",""
"D20","Tout_open","",""
"D21","Tout_open_aprch","",""
"D22","Topen_apr","",""
"D23","Tout_close","",""
"D24","Tclose","",""
"D25","Tout_close_apr","",""
"D100","Open_count_lim_1","",""
"T0","Dome_tout","",""
"T1","Curr_delay","",""
"T7","Rain_time","",""
"T8","Rain_elapsd_time","",""
"T10","timer_500ms","",""
"T11","T_countdown","",""
"SS2","filename","",""
"SL0","DMLOG_new_read","","Modbus variables new reading for dmlogger output"
"SL1","DMLOG_MOD_OUT","","Modbus variables sent to DMLOGGER"
"SL2","Log_Filename","","DMlogger log filename"
"SL3","DMLOG_saved_read","","Modbus variables to be checked against at next cycle"
"SL4","SMTP_Error","",""
"UDT0","date","",""
"MC1","Door_locked","",""
"MC2","Door_closed","",""
"MC3","Local_enable","",""
"MC100","Dome_enable","","LVM software motor enable"
"MC102","Motor_dir","","LVM software motor direction"
"MC103","Dome_Tout_stat","","Roll-off timout status"
"MC104","Dome_Tout_rst","","Reset Roll-off timeout bit"
"MC105","NE_lim_mod","","North-east LS modbus output"
"MC106","SE_lim_mod","","South-east LS modbus output"
"MC107","NW_lim_mod","","North-west LS modbus output"
"MC108","SW_lim_mod","","South-west LS modbus output"
"MC109","Dome_closed","","Dome status closed"
"MC110","Dome_open","","Dome status open"
"MC111","Rolloff_lout","",""
"MC112","Rolloff_error","",""
"MC113","Drive_error_rst","",""
"MC200","Estop_stat_mbus","","E-stop status, read on the secondary electrical panel"
"MC201","Remote_estop","","Remote E-stop"
"MC202","Remote_estop_rel","","Remote E-stop release"
"MC235","CTL_room_tog","","Modbus control room lights toggle"
"MC236","UTL_room_tog","","Modbus utilities room lights toggle"
"MC237","Spec_room_tog","","Modbus Spectrograph room lights toggle"
"MC238","Mze_room_tog","","Modbus mezzanine room lights toggle"
"MC239","Plat_wlight_tog","","Modbus roll-off white light toggle"
"MC240","Plat_rlight_tog","","Modbus roll-off red light toggle"
"MC335","CTL_room_stat","","Modbus utilities room lights status"
"MC336","UTL_room_stat","","Modbus utilities room lights status"
"MC337","Spec_room_stat","","Modbus spectrograph room lights status"
"MC338","Mze_room_stat","","Modbus mezzanine room lights status"
"MC339","Plat_wlight_stat","","Modbus roll-off white light status"
"MC340","Plat_rlight_stat","","Modbus roll-off red light status"
"MC600","HB_input","",""
"MC601","HB_ACK","",""
"MC602","HB_err_out","",""
"MC700","Rain_mod","",""
"MC900","Eng_hw_mode","","Disables hardware safety features"
"MC901","Eng_sw_mode","","Disables software safety features"
"MHR150","Dome_enc_count","","Roll off encoder counts"
"MHR151","Dome_enc_scale","","Roll off position scaled to mm"
"MHR152","Dome_speed","","Roll off speed scaled to mm"
"MHR411","Status_1","",""
"MHR413","VDF_comm_freq","","VDF desired frequency output"
"MHR414","VDF_out_freq","","VDF output frequency"
"MHR415","Im","","VDF output current"
"MHR510","Rem_freq","","VDF remote freq variable"
"MHR600","O2_pct_utl_room","",""
"MHR601","O2_pct_spec_room","",""
"MHR602","ODH_EC_utl_room","",""
"MHR603","ODH_EC_spec_room","",""
"MHR604","ODH_SB_utl_room","",""
"MHR605","ODH_SB_spec_room","",""
"MHR700","Rain_el_time","",""
"MHR701","No_rain_cdown","","Countdown from 15 min with no rain"
"MHR1024","Status_2","","GS3 drive status 2"
"MHR1024:0","Status_2:0","","GS3 drive movement transitioning state"
"MHR1024:1","Status_2:1","","GS3 drive movement status"
"MHR1024:3","Status_2:3","","GS3 drive directiontransitioning state"
"MHR1024:4","Status_2:4","","GS3 drive direction"
"Drive.S0","Idle","",""
"Drive.S1","Motor_start","",""
"Drive.S2","Motor_moving","",""
"Drive.S3","Drive_disable","","Drive is disabled due to local mode or heartbeat"
"Rain.S0","Rain_idle","",""
"Rain.S1","Rain_timer","",""
"Heartbeat.S0","HB_idle","",""
"Heartbeat.S1","HB_ok_wait","",""
"Heartbeat.S3","HB_error","",""
"Heartbeat.S4","HB_wait_error","",""
"Drive_new.S0","Drive_idle","",""
"Drive_new.S1","Rem_brakes","",""
"Drive_new.S2","Start_movement","",""
"Drive_new.S3","Open_roof","",""
"Drive_new.S4","Open_aproach","",""
"Drive_new.S5","Close_roof","",""
"Drive_new.S6","Close_roof_apr","",""
"Drive_new.S7","Stop_movement","",""
"Drive_new.S8","Set_brakes","",""
"Drive_new.S9","Error","",""
"Drive_new.S10","Lockout","",""
"Drive_new.S11","Stop_move_select","",""
"Heartbeat_new.S0","HB_idle_new","",""
"Heartbeat_new.S1","HB_ok_wait_new","",""
"Heartbeat_new.S3","HB_error_new","",""
"Heartbeat_new.S4","HB_error_wait","",""
#END

